---
import { AddDriver } from '../../components/AddDriver'
import UserAdd from '../../components/icons/UserAdd.astro'
import InputFilter from '../../components/InputFilter.astro'
import Main from '../../components/Main.astro'
import MainTitle from '../../components/MainTitle.astro'
import LayoutAdmin from '../../layouts/LayoutAdmin.astro'
export const prerender = false
/* Check current session */
if (!Astro.cookies.has('__session')) {
  return Astro.redirect('/signin')
}

const sessionCookie = Astro.cookies.get('__session')?.value

if (!sessionCookie) {
  return Astro.redirect('/signin')
}
---

<LayoutAdmin>
  <Main
    class='relative overflow-hidden bg-azur-200/20 p-4 md:p-6 flex flex-col gap-4 md:gap-6 pb-16 sm:pb-6'
  >
    <MainTitle title='Lista de conductores' />

    <section class='flex justify-between gap-x-2 items-center'>
      <InputFilter />
      <button
        id='open-modal'
        class='flex items-center gap-x-1 bg-azur-600 text-azur-50/80 border rounded-xl py-2 px-4 hover:bg-azur-800 hover:text-azur-50'
      >
        <UserAdd />
        Agregar
      </button>
    </section>

    <section
      class='flex flex-col w-full gap-y-4 bg-azur-50 rounded-xl border overflow-hidden'
    >
      <div class='overflow-x-scroll'>
        <table class='w-full'>
          <thead>
            <tr
              class='grid grid-cols-[minmax(max-content,_1fr),minmax(60px,_1fr),minmax(60px,_1fr),minmax(60px,_1fr),minmax(80px,_110px)] gap-4 text-left text-sm [&_th]:font-medium text-gray-600 border-b py-3 px-4'
            >
              <th>Nombre</th>
              <th>Correo</th>
              <th>Contraseña</th>
              <th>Teléfono</th>
              <th>Estado</th>
            </tr>
          </thead>
        </table>
      </div>
    </section>
    <AddDriver client:load />
  </Main>
</LayoutAdmin>
<script>
  const $openModal = document.getElementById('open-modal')
  const $closeModal = document.getElementById('close-modal')
  const $modal = document.getElementById('modal-add-driver')

  $openModal?.addEventListener('click', () => {
    $modal?.classList.remove('hidden')
  })
  $closeModal?.addEventListener('click', () => {
    $modal?.classList.add('hidden')
  })
</script>
